"use strict";(self.webpackChunkopenscan=self.webpackChunkopenscan||[]).push([[2487],{22487:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var l=n(74848),r=n(96540),a=n(34794),c=n(41574),s=n(3440),o=function(e,t,n,l){return new(n||(n=Promise))(function(r,a){function c(e){try{o(l.next(e))}catch(t){a(t)}}function s(e){try{o(l.throw(e))}catch(t){a(t)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}o((l=l.apply(e,t||[])).next())})},i=function(e,t){var n,l,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=s(0),c.throw=s(1),c.return=s(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(a=0)),a;)try{if(n=1,l&&(r=2&s[0]?l.return:s[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,s[1])).done)return r;switch(l=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,l=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(o){s=[6,o],l=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},u=10;function d(){var e,t,n=this,d=(0,a.g)().networkId,h=(0,a.ok)()[0],b=(0,a.Zp)(),m=Number(d)||1,f=(0,c.J)(m),p=(0,r.useState)([]),x=p[0],g=p[1],N=(0,r.useState)(!0),k=N[0],j=N[1],v=(0,r.useState)(null),w=v[0],y=v[1],S=(0,r.useState)(null),L=S[0],B=S[1],C=h.get("fromBlock"),A=C?Number(C):null;(0,r.useEffect)(function(){if(f){o(n,void 0,void 0,function(){var e,t,n,l,r;return i(this,function(a){switch(a.label){case 0:j(!0),y(null),a.label=1;case 1:return a.trys.push([1,4,5,6]),[4,f.networkAdapter.getLatestBlockNumber()];case 2:return e=a.sent(),B(e),t=null!==A?A:e,n=Array.from({length:u},function(e,n){return t-n}).filter(function(e){return e>=0}),[4,Promise.all(n.map(function(e){return f.networkAdapter.getBlock(e)}))];case 3:return l=a.sent(),console.log("Fetched blocks:",l),g(l.map(function(e){return e.data})),[3,6];case 4:return r=a.sent(),console.error("Error fetching blocks:",r),y(r.message||"Failed to fetch blocks"),[3,6];case 5:return j(!1),[7];case 6:return[2]}})})}else j(!1)},[f,A]);var E=function(e){try{return new Date(1e3*Number(e)).toLocaleString()}catch(t){return e}},G=x[x.length-1],I=null!==A&&null!==L&&A<L,O=x.length>0&&G&&Number(G.number)>0,T=null===A||null!==L&&A>=L;return k?(0,l.jsxs)("div",{className:"container-wide page-container-padded text-center page-card",children:[(0,l.jsx)("h1",{className:"page-title-small",children:"Latest Blocks"}),(0,l.jsx)(s.A,{text:"Loading blocks..."})]}):w?(0,l.jsxs)("div",{className:"container-wide page-container-padded text-center page-card",children:[(0,l.jsx)("h1",{className:"page-title-small",children:"Latest Blocks"}),(0,l.jsxs)("p",{className:"error-text",children:["Error: ",w]})]}):(0,l.jsxs)("div",{className:"container-wide page-container-padded text-center page-card",children:[(0,l.jsx)("h1",{className:"page-title-small",children:"Latest Blocks"}),(0,l.jsx)("p",{className:"page-subtitle-text",children:T?"Showing ".concat(x.length," most recent blocks"):"Showing blocks ".concat(Number((null===(e=x[x.length-1])||void 0===e?void 0:e.number)||0).toLocaleString()," - ").concat(Number((null===(t=x[0])||void 0===t?void 0:t.number)||0).toLocaleString())}),(0,l.jsx)("div",{className:"table-wrapper",children:(0,l.jsxs)("table",{className:"dash-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Block"}),(0,l.jsx)("th",{children:"Timestamp"}),(0,l.jsx)("th",{children:"Txns"}),(0,l.jsx)("th",{children:"Miner"}),(0,l.jsx)("th",{children:"Gas Used"}),(0,l.jsx)("th",{children:"Gas Limit"}),(0,l.jsx)("th",{children:"Size"})]})}),(0,l.jsx)("tbody",{children:x.map(function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)(a.N_,{to:"/".concat(d,"/block/").concat(Number(e.number).toString()),className:"table-cell-number",children:Number(e.number).toLocaleString()})}),(0,l.jsx)("td",{className:"table-cell-text",children:E(e.timestamp)}),(0,l.jsx)("td",{className:"table-cell-value",children:e.transactions?e.transactions.length:0}),(0,l.jsx)("td",{className:"table-cell-mono",title:e.miner,children:(0,l.jsx)(a.N_,{to:"/".concat(d,"/address/").concat(e.miner),className:"table-cell-address",children:(t=e.miner,void 0===n&&(n=10),void 0===r&&(r=8),t?t.length<=n+r?t:"".concat(t.slice(0,n),"...").concat(t.slice(-r)):"")})}),(0,l.jsx)("td",{className:"table-cell-text",children:Number(e.gasUsed).toLocaleString()}),(0,l.jsx)("td",{className:"table-cell-muted",children:Number(e.gasLimit).toLocaleString()}),(0,l.jsxs)("td",{className:"table-cell-muted",children:[Number(e.size).toLocaleString()," bytes"]})]},e.number);var t,n,r})})]})}),(0,l.jsxs)("div",{className:"pagination-container",children:[(0,l.jsx)("button",{onClick:function(){b("/".concat(d,"/blocks"))},disabled:T,className:"pagination-btn",title:"Go to latest blocks",children:"Latest"}),(0,l.jsx)("button",{onClick:function(){if(0!==x.length&&null!==L&&x[0]){var e=Number(x[0].number),t=Math.min(e+u,L);b(t>=L?"/".concat(d,"/blocks"):"/".concat(d,"/blocks?fromBlock=").concat(t))}},disabled:!I,className:"pagination-btn",title:"View newer blocks",children:"← Newer"}),(0,l.jsx)("button",{onClick:function(){if(0!==x.length){var e=x[x.length-1];if(e){var t=Number(e.number)-1;t>=0&&b("/".concat(d,"/blocks?fromBlock=").concat(t))}}},disabled:!O,className:"pagination-btn",title:"View older blocks",children:"Older →"})]})]})}}}]);